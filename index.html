<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TaktLab – Cycle Time & Capacity Analyzer</title>
<style>
  :root{
    --bg-main:#07152b;
    --bg-card:#0b1f3a;
    --bg-card-soft:#0f2544;
    --accent-green:#00c853;
    --accent-amber:#ffb300;
    --accent-red:#ff1744;
    --accent-blue:#29b6f6;
    --accent-grey:#cfd8dc;
    --text-main:#ffffff;
    --text-soft:#c5cae9;
    --text-muted:#90a4ae;
    --border-soft:#1c3357;
    --btn-green:#00c853;
    --btn-orange:#ff9100;
    --btn-grey:#455a64;
    --badge-green:#004d40;
    --badge-red:#b71c1c;
    --badge-amber:#ff8f00;
  }

  *{box-sizing:border-box;}

  body{
    margin:0;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:linear-gradient(180deg,#020b1a 0%,#07152b 40%,#020b1a 100%);
    color:var(--text-main);
  }

  .page{
    max-width:1100px;
    margin:0 auto;
    padding:12px 10px 40px;
  }

  /* ===== Sticky ONLY timer bar (title + display + Start/Lap) ===== */
  .sticky-timer-bar{
    position:sticky;
    top:0;
    z-index:100;
    background:linear-gradient(180deg,#020b1a 0%,#07152b 90%);
    padding:8px 0 10px;
  }

  .top-row{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:8px;
  }

  .logo-circle{
    width:38px;
    height:38px;
    border-radius:50%;
    border:2px solid var(--accent-grey);
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
  }
  .logo-gear{
    width:22px;
    height:22px;
    border-radius:50%;
    border:2px solid var(--accent-grey);
    position:relative;
  }
  .logo-gear::before{
    content:"";
    position:absolute;
    inset:4px;
    border-radius:50%;
    border:2px solid var(--accent-green);
    border-right-color:transparent;
    border-bottom-color:transparent;
    transform-origin:50% 50%;
  }
  .logo-gear.spinning::before{
    animation:logo-spin 2s linear infinite;
  }
  @keyframes logo-spin{
    from{transform:rotate(0deg);}
    to{transform:rotate(360deg);}
  }

  .title-block{
    display:flex;
    flex-direction:column;
    gap:2px;
  }
  .title-main{
    font-size:1.2rem;
    font-weight:700;
    letter-spacing:.03em;
  }
  .title-sub{
    font-size:.72rem;
    color:var(--text-soft);
  }

  .timer-card{
    background:var(--bg-card);
    border-radius:18px;
    border:1px solid var(--border-soft);
    padding:6px 10px 10px;
    box-shadow:0 8px 18px rgba(0,0,0,.45);
  }

  .timer-display{
    text-align:center;
    font-size:2.8rem;
    font-weight:600;
    letter-spacing:.08em;
    padding:4px 4px 10px;
  }

  /* NEW: bloque de info de muestra bajo el cronómetro */
  .sample-info{
    font-size:.78rem;
    margin:0 0 6px;
    padding:4px 8px;
    border-radius:10px;
    border:1px solid transparent;
  }
  .sample-neutral{
    background:rgba(255,255,255,.03);
    border-color:rgba(255,255,255,.08);
    color:var(--text-soft);
  }
  .sample-good{
    background:rgba(0,200,83,.15);
    border-color:rgba(0,200,83,.7);
    color:#c8e6c9;
  }
  .sample-warn{
    background:rgba(255,193,7,.14);
    border-color:rgba(255,193,7,.8);
    color:#ffe082;
  }
  .sample-bad{
    background:rgba(244,67,54,.16);
    border-color:rgba(244,67,54,.9);
    color:#ffab91;
  }

  .btn-row-main{
    display:flex;
    gap:10px;
    margin-bottom:2px;
  }
  .btn{
    border:none;
    border-radius:16px;
    padding:10px 12px;
    font-size:.9rem;
    font-weight:600;
    cursor:pointer;
    color:#fff;
    box-shadow:0 4px 10px rgba(0,0,0,.4);
    flex:1;
    transition:transform .04s ease, box-shadow .04s ease, background .15s;
    touch-action:manipulation;
  }
  .btn:active{
    transform:translateY(1px);
    box-shadow:0 1px 4px rgba(0,0,0,.5);
  }
  .btn-start{background:var(--btn-green);}
  .btn-lap{background:var(--btn-orange);}

  .flash{
    animation:flash-bg .12s ease-out;
  }
  @keyframes flash-bg{
    from{background:rgba(255,255,255,.18);}
    to{background:transparent;}
  }

  /* Rest of page */
  .content-section{margin-top:10px;}

  .section-card{
    background:var(--bg-card);
    border-radius:18px;
    border:1px solid var(--border-soft);
    padding:10px 10px 12px;
    margin-bottom:10px;
  }
  .section-title{
    font-size:.9rem;
    font-weight:600;
    margin-bottom:6px;
  }

  .mode-row{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    align-items:center;
    font-size:.78rem;
    color:var(--text-soft);
  }
  .mode-row label{font-weight:500;}
  .mode-row select,
  .mode-row input{
    background:#020b1a;
    border-radius:8px;
    border:1px solid var(--border-soft);
    padding:4px 8px;
    color:var(--text-soft);
    font-size:.78rem;
    min-width:70px;
  }
  .mode-row input[type="number"]{width:70px;}

  /* T1/T2 mini indicators */
  .mini-t12-wrapper{
    display:flex;
    gap:8px;
    margin-top:8px;
  }
  .mini-t12{
    flex:1;
    background:#020b1a;
    border-radius:14px;
    border:1px solid var(--border-soft);
    padding:6px 10px;
    display:flex;
    align-items:center;
    gap:8px;
    min-height:56px;
  }
  .mini-ring{
    width:36px;
    height:36px;
    border-radius:50%;
    border:3px solid rgba(255,255,255,.08);
    position:relative;
    overflow:hidden;
    /* OCULTAR CÍRCULOS */
    display:none;
  }
  .mini-ring::before{
    content:"";
    position:absolute;
    inset:-3px;
    border-radius:50%;
    border:3px solid transparent;
    border-top-color:var(--accent-green);
    border-right-color:var(--accent-green);
    transform-origin:50% 50%;
    animation:ring-spin 1.2s linear infinite;
    opacity:.2;
  }
  .mini-ring.paused::before{
    animation-play-state:paused;
    opacity:.35;
  }
  @keyframes ring-spin{
    from{transform:rotate(0);}
    to{transform:rotate(360deg);}
  }
  .mini-label{font-size:.72rem;color:var(--text-soft);}
  .mini-value{font-size:.95rem;font-weight:600;}

  table{
    width:100%;
    border-collapse:collapse;
    font-size:.75rem;
  }
  th,td{
    padding:4px 6px;
    text-align:right;
    border-bottom:1px solid rgba(255,255,255,.04);
  }
  th:first-child,td:first-child{text-align:left;}
  th{
    color:var(--text-soft);
    font-weight:600;
    background:rgba(255,255,255,.02);
    position:sticky;
    top:0;
    z-index:5;
  }
  tbody tr:nth-child(even){
    background:rgba(255,255,255,.02);
  }

  .badge{
    display:inline-block;
    padding:2px 6px;
    border-radius:999px;
    font-size:.68rem;
    border:1px solid transparent;
  }
  .badge-good{background:var(--badge-green);border-color:#00e676;}
  .badge-warn{background:var(--badge-amber);border-color:#ffe082;}
  .badge-bad{background:var(--badge-red);border-color:#ff8a80;}

  .btn-row-secondary{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin:6px 0 4px;
  }
  .btn-small{
    padding:6px 10px;
    border-radius:10px;
    font-size:.75rem;
    flex:0 0 auto;
    background:var(--bg-card-soft);
    color:var(--text-soft);
    border:1px solid var(--border-soft);
    cursor:pointer;
  }
  .btn-small:active{transform:translateY(1px);}

  .btn-edit,.btn-del{
    padding:2px 6px;
    border-radius:8px;
    font-size:.7rem;
    border:1px solid rgba(255,255,255,.2);
    cursor:pointer;
    background:transparent;
  }
  .btn-edit{color:#81d4fa;}
  .btn-del{color:#ff8a80;}

  .stats-focus{
    font-size:.74rem;
    line-height:1.3;
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .focus-line{
    padding:3px 6px;
    border-radius:8px;
  }
  .focus-good{background:rgba(0,200,83,.12);border:1px solid rgba(0,200,83,.6);}
  .focus-warn{background:rgba(255,193,7,.08);border:1px solid rgba(255,193,7,.6);}
  .focus-bad{background:rgba(244,
